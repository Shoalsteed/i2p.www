{% extends "global/layout.html" %}
{% block title %}{{ _('How to Set up a Reseed Server using a Docker Image') }}{% endblock %}
{% block lastupdated %}2023-01{% endblock %}
{% block content %}

<h2>{% trans %}General Information{% endtrans %}</h2>

<h4><a href="reseed-policy">To read the reseed policy, follow this link.</a></h4>
<h4><a href="reseed">Please see the general information for all reseed servers in addition to reading this section.</a></h4>

<h2>{% trans %}Installation from a Docker Image{% endtrans %}</h2>

  <p>
    To make it easier to deploy reseeds, it is possible to run this software as a
    Docker image. Because the software requires access to a network database to host
    a reseed, you will need to mount the netDb as a volume inside your docker
    container to provide access to it, and you will need to run it as the same user
    and group inside the container as I2P.
  </p>
  <p>
    When you run a reseed under Docker in this fashion, it will automatically
    generate a self-signed certificate for your reseed server in a Docker volume
    named reseed-keys.
    <em>
      Back up this directory
    </em>
    , if it is lost it is impossible
    to reproduce.
  </p>
  <p>
    Additional flags can be passed to the application in the Docker container by
    appending them to the command. Please note that Docker is not currently
    compatible with .onion reseeds unless you pass the &ndash;network=host tag.
  </p>
  <h2>
    If I2P is running as your user, do this:
  </h2>
  <pre><code>    docker run -itd \
      --name reseed \
      --publish 443:8443 \
      --restart always \
      --volume $HOME/.i2p/netDb:$HOME/.i2p/netDb:z \
      --volume reseed-keys:/var/lib/i2p/i2p-config/reseed \
      eyedeekay/reseed \
          --signer $YOUR_EMAIL_HERE
</code></pre>
  <h2>
    If I2P is running as another user, do this:
  </h2>
  <pre><code>    docker run -itd \
      --name reseed \
      --user $(I2P_UID) \
      --group-add $(I2P_GID) \
      --publish 443:8443 \
      --restart always \
      --volume /PATH/TO/USER/I2P/HERE/netDb:/var/lib/i2p/i2p-config/netDb:z \
      --volume reseed-keys:/var/lib/i2p/i2p-config/reseed \
      eyedeekay/reseed \
          --signer $YOUR_EMAIL_HERE
</code></pre>
  <h2>
    <strong>
      Debian/Ubuntu and Docker
    </strong>
  </h2>
  <p>
    In many cases I2P will be running as the Debian system user
    <code>
      i2psvc
    </code>
    . This
    is the case for all installs where Debian&rsquo;s Advanced Packaging Tool(apt) was
    used to peform the task. If you used
    <code>
      apt-get install
    </code>
    this command will
    work for you. In that case, just copy-and-paste:
  </p>
  <pre><code>    docker run -itd \
      --name reseed \
      --user $(id -u i2psvc) \
      --group-add $(id -g i2psvc) \
      --publish 443:8443 \
      --restart always \
      --volume /var/lib/i2p/i2p-config/netDb:/var/lib/i2p/i2p-config/netDb:z \
      --volume reseed-keys:/var/lib/i2p/i2p-config/reseed \
      eyedeekay/reseed \
          --signer $YOUR_EMAIL_HERE
</code></pre>

{% endblock %}
